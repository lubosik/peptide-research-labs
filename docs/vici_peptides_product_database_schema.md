# Vici Peptides Product Database Schema
## Airtable Foundation Blueprint

**Project:** Vici Peptides E-commerce System  
**Phase:** 84 - Schema Definition  
**Date:** 2024-12-19  
**Status:** Schema Definition Complete - Awaiting Airtable Base Creation

---

## Table: `Peptide_Products`

This table serves as the single source of truth for all product information, pricing, stock status, imagery, and SEO metadata for the Vici Peptides e-commerce website.

### Schema Overview

Each row in this table represents a **single product variant** (e.g., "Retatrutide 5mg", "Retatrutide 10mg"). Products with multiple strengths will have multiple rows, allowing granular inventory and pricing management.

---

## Column Specifications

| Column Name | Data Type | Example Value | Description |
|------------|-----------|---------------|-------------|
| **Product_ID** | Autonumber / Unique ID | `001` | Internal unique identifier (auto-generated by Airtable) |
| **Product_Name** | Single line text | `"Retatrutide"` | The official peptide product name (base name without strength) |
| **Variant_Strength** | Single select | `"5mg"`, `"10mg"`, `"20mg"`, `"30mg"` | Product variant strength/size (required for variant products) |
| **Category** | Single select | `"Weight Loss / Blood Sugar Control / Metabolic Regulation"` | Category derived from the Peptides Site full Price list |
| **Price_USD** | Currency | `91.00` | Base retail price (Overseas warehouse pricing) |
| **Price_US_Warehouse** | Formula | `Price_USD * 1.25` | US warehouse price (25% markup) |
| **In_Stock** | Checkbox | `✅` | Controls if product variant is visible on the live site |
| **Warehouse_Location** | Single select | `"US Warehouse"`, `"Overseas Warehouse"` | Indicates fulfillment source (both available by default) |
| **SKU_Code** | Single line text | `"RT5"` | Unique product SKU for this variant |
| **Short_Description** | Long text | `"Triple hormone receptor agonist for metabolic research"` | One-sentence summary for product grid |
| **Full_Description** | Long text (Markdown) | `"RETATRUTIDE IS A TRIPLE HORMONE RECEPTOR AGONIST..."` | Used on product detail page |
| **Molecular_Formula** | Single line text | `"C184H282N50O59"` | Chemical molecular formula |
| **Molar_Mass** | Single line text | `"4107.5 g/mol"` | Molecular weight |
| **CAS_Number** | Single line text | `"N/A"` or `"910463-68-2"` | Chemical registry number |
| **Synonyms** | Multiple select | `"LY3437943"`, `"Triple agonist"` | Alternative names (comma-separated) |
| **PubChem_ID** | Single line text | `"N/A"` or `"16137256"` | PubChem database identifier |
| **Image_URL** | Attachment / URL | Link to product image | Used for shop grid and details |
| **Certificate_of_Analysis_URL** | URL | Link to PDF | Optional COA document link |
| **Last_Updated** | Auto / Modified Time | Auto | Timestamp for sync logic (auto-updated) |
| **SEO_Title** | Single line text | `"Buy Retatrutide 5mg Peptide – Vici Peptides"` | For metadata SEO |
| **SEO_Description** | Single line text | `"High-purity Retatrutide 5mg peptide for lab use. Research-grade quality."` | SEO meta description |
| **Featured** | Checkbox | `✅` | Used for homepage "Best Sellers" section |
| **Popularity_Score** | Number (1–100) | `85` | Used for ranking and sorting |
| **Stock_Quantity** | Number | `120` | Quantity available for this variant |
| **Unit_Size** | Single line text | `"1 Vial"` | Packaging info (always "1 Vial" per order) |
| **Specification** | Single line text | `"5mg vial"` | Variant-specific specification |
| **Temperature_Storage** | Single line text | `"Store at -20°C"` | Compliance / lab guidance |
| **Shelf_Life** | Single line text | `"36 months"` | Product shelf life |
| **Shipping_Restrictions** | Single line text | `"Ships only to US labs"` | Regulatory control (optional) |
| **Compliance_Tag** | Formula | `"RUO"` | "Research Use Only" label (always "RUO") |
| **Is_Discontinued** | Checkbox | `☐` | Hides from live listing |
| **API_Visibility_Status** | Formula | `"LIVE"`, `"HIDDEN"`, `"DISCONTINUED"` | Derived logic: LIVE if In_Stock=✅ and Is_Discontinued=☐ |
| **Research_Applications** | Long text | `"Retatrutide is used in laboratory research..."` | Detailed research use cases |
| **Storage_Requirements** | Long text | `"Store lyophilized powder at -20°C..."` | Detailed storage instructions |
| **Handling_Guidelines** | Long text | `"Handle using sterile techniques..."` | Safety and handling instructions |
| **Notes** | Long text | `"Batch 3 retest scheduled"` | Internal admin comments |
| **Product_Slug** | Single line text | `"retatrutide"` | URL-friendly identifier (shared across variants) |
| **Base_Product_ID** | Link to Peptide_Products | Self-reference | Links variants to their base product (optional) |

---

## Formula Field Definitions

### SKU_Code (Formula)
```
"VP-" & Product_ID
```
**Note:** This is a placeholder. In practice, SKU codes are manually entered based on the product naming convention (e.g., "RT5" for Retatrutide 5mg).

### Price_US_Warehouse (Formula)
```
Price_USD * 1.25
```
Calculates US warehouse price with 25% markup.

### Compliance_Tag (Formula)
```
"RUO"
```
Always returns "Research Use Only" for compliance.

### API_Visibility_Status (Formula)
```
IF(
  AND(In_Stock = TRUE(), Is_Discontinued = FALSE()),
  "LIVE",
  IF(Is_Discontinued = TRUE(), "DISCONTINUED", "HIDDEN")
)
```
Determines visibility status based on stock and discontinued flags.

---

## Category Options

The following categories are available in the `Category` field:

1. `Beauty / Anti-Aging / Antioxidant`
2. `Weight Loss / Blood Sugar Control / Metabolic Regulation`
3. `Hormones / Growth Factors / Bodybuilding`
4. `Repair / Healing / Anti-inflammatory`
5. `Cognitive / Neurological / Nootropic`
6. `Sexual Health / Libido Enhancement`
7. `Other / Research Compounds`

---

## Warehouse Options

- `US Warehouse` - Re-tested and quality-verified in U.S. laboratories (25% price markup)
- `Overseas Warehouse` - Shipped directly from verified international partner facilities (base price)

**Note:** Most products are available from both warehouses. The `Warehouse_Location` field can be set to both or either option.

---

## Data Mapping to Website

### Shop Page (`/shop`)
- **Product Grid:** Uses `Product_Name`, `Variant_Strength`, `Image_URL`, `Short_Description`, `Price_USD` (or `Price_US_Warehouse` based on selection)
- **Filtering:** By `Category`, `Warehouse_Location`, `In_Stock` status
- **Sorting:** By `Price_USD`, `Popularity_Score`, `Product_Name`

### Product Detail Page (`/products/[slug]`)
- **Header:** `Product_Name`, `Variant_Strength`, `Image_URL`
- **Description:** `Full_Description` (rendered as Markdown)
- **Pricing:** `Price_USD` and `Price_US_Warehouse` with warehouse selector
- **Chemical Info:** `Molecular_Formula`, `Molar_Mass`, `CAS_Number`, `PubChem_ID`
- **Research:** `Research_Applications`
- **Storage:** `Storage_Requirements`, `Temperature_Storage`, `Shelf_Life`
- **Safety:** `Handling_Guidelines`
- **Variants:** All rows with same `Product_Slug` grouped together

### SEO Metadata
- **Title:** `SEO_Title`
- **Description:** `SEO_Description`
- **OpenGraph Image:** `Image_URL`

### Cart & Checkout
- **SKU:** `SKU_Code`
- **Price:** Based on selected warehouse (`Price_USD` or `Price_US_Warehouse`)
- **Stock Check:** `In_Stock` and `Stock_Quantity`
- **Unit:** `Unit_Size` (always "1 Vial")

---

## Example Records

See `/data/airtable_schema.json` for complete example records with all fields populated.

### Example 1: Retatrutide (Multiple Variants)
- Row 1: Retatrutide 5mg - $91.00 - SKU: RT5
- Row 2: Retatrutide 10mg - $130.00 - SKU: RT10
- Row 3: Retatrutide 20mg - $207.00 - SKU: RT20
- Row 4: Retatrutide 30mg - $270.00 - SKU: RT30

### Example 2: Epitalon (Multiple Variants)
- Row 1: Epitalon 10mg - $35.00 - SKU: ET10
- Row 2: Epitalon 50mg - $162.00 - SKU: ET50

### Example 3: Single Variant Product
- Row 1: Cerebrolysin 60ml - $160.00 - SKU: CBL60

---

## Airtable Setup Notes

### Step 1: Create Base
1. Create a new Airtable base named "Vici Peptides Products"
2. Create a table named "Peptide_Products"

### Step 2: Add Columns
1. Add all columns listed above in the specified order
2. Set appropriate field types (text, number, currency, checkbox, select, etc.)
3. Configure formula fields as specified

### Step 3: Configure Options
1. **Category:** Add all category options listed above
2. **Warehouse_Location:** Add "US Warehouse" and "Overseas Warehouse"
3. **Variant_Strength:** Add common strengths: "2mg", "5mg", "10mg", "20mg", "30mg", "50mg", "100mg", "5000iu", "10000iu", etc. (or use free text)

### Step 4: Import Data
1. Use the example records from `/data/airtable_schema.json` as a template
2. Import all products from the current `data/products.ts` file
3. Ensure each variant gets its own row

### Step 5: Set Permissions
1. Create a read-only API key for the website integration
2. Restrict write access to admin users only

---

## API Integration Notes

### Field Mapping
When fetching data from Airtable, map fields as follows:

```typescript
{
  id: record.id,
  productId: record.get('Product_ID'),
  name: record.get('Product_Name'),
  variantStrength: record.get('Variant_Strength'),
  category: record.get('Category'),
  price: record.get('Price_USD'),
  priceUS: record.get('Price_US_Warehouse'),
  inStock: record.get('In_Stock'),
  warehouse: record.get('Warehouse_Location'),
  sku: record.get('SKU_Code'),
  image: record.get('Image_URL'),
  description: record.get('Short_Description'),
  fullDescription: record.get('Full_Description'),
  slug: record.get('Product_Slug'),
  seoTitle: record.get('SEO_Title'),
  seoDescription: record.get('SEO_Description'),
  // ... other fields
}
```

### Filtering
- **Active Products:** `In_Stock = TRUE()` AND `Is_Discontinued = FALSE()`
- **By Category:** `Category = "Weight Loss / Blood Sugar Control / Metabolic Regulation"`
- **By Warehouse:** `Warehouse_Location = "US Warehouse"`

### Sorting
- **By Price:** Sort by `Price_USD` (ascending/descending)
- **By Popularity:** Sort by `Popularity_Score` (descending)
- **By Name:** Sort by `Product_Name` (ascending)

---

## Next Steps

1. ✅ **Phase 84 Complete:** Schema defined and documented
2. ⏸️ **Awaiting User Action:** Create Airtable base and populate with data
3. ⏭️ **Phase 85 (After "continue"):** Connect Airtable base to Next.js website

---

## Questions or Issues?

If you encounter any issues during Airtable setup or need clarification on any field, refer to:
- This schema document
- `/data/airtable_schema.json` for example records
- Current product data in `/data/products.ts` for reference

---

**Document Version:** 1.0  
**Last Updated:** 2024-12-19  
**Status:** Ready for Airtable Base Creation

